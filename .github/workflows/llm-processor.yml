# .github/workflows/gemini-bulk-processor.yml
name: Gemini Bulk File Processor

on:
  workflow_dispatch:
    inputs:
      input_file:
        description: 'ÐŸÑƒÑ‚ÑŒ Ðº Ð²Ñ…Ð¾Ð´Ð½Ð¾Ð¼Ñƒ Ñ„Ð°Ð¹Ð»Ñƒ Ð² Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸'
        required: true
        type: string
        default: 'data/facts27.txt'
      
      prompt:
        description: 'ÐŸÑ€Ð¾Ð¼Ð¿Ñ‚ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸'
        required: true
        type: string
        default: 'ÐŸÑ€Ð¾Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐ¹ ÑÑ‚Ð¾Ñ‚ Ñ‚ÐµÐºÑÑ‚ Ð¸ Ð²Ñ‹Ð´ÐµÐ»Ð¸ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ„Ð°ÐºÑ‚Ñ‹'
      
      output_filename:
        description: 'Ð˜Ð¼Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð° (Ð±ÐµÐ· Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ñ)'
        required: true
        type: string
        default: 'processed_facts'
      
      model:
        description: 'ÐœÐ¾Ð´ÐµÐ»ÑŒ Gemini API'
        required: false
        type: choice
        options:
          - 'gemini-2.0-flash'
          - 'gemini-2.0-flash-lite'
          - 'gemini-2.5-flash'
          - 'gemini-2.5-flash-lite'
          - 'gemini-2.5-pro'
          - 'gemini-1.5-flash'
          - 'gemini-1.5-pro'
        default: 'gemini-2.0-flash'
      
      chunk_size:
        description: 'Ð Ð°Ð·Ð¼ÐµÑ€ Ñ‡Ð°Ð½ÐºÐ° Ð² Ñ‚Ð¾ÐºÐµÐ½Ð°Ñ… (Ð´Ð»Ñ Ð¿Ð»Ð°Ñ‚Ð½Ð¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ)'
        required: false
        type: choice
        options:
          - '500000'
          - '1000000'
          - '1500000'
          - '2000000'
          - '3000000'
        default: '1000000'
      
      delay_between_chunks:
        description: 'Ð—Ð°Ð´ÐµÑ€Ð¶ÐºÐ° Ð¼ÐµÐ¶Ð´Ñƒ Ñ‡Ð°Ð½ÐºÐ°Ð¼Ð¸ Ð² ÑÐµÐºÑƒÐ½Ð´Ð°Ñ…'
        required: false
        type: choice
        options:
          - '0'
          - '5'
          - '10'
          - '15'
          - '30'
          - '60'
        default: '0'
      
      concurrent_requests:
        description: 'ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²'
        required: false
        type: choice
        options:
          - '1'
          - '2'
          - '3'
          - '5'
          - '10'
        default: '3'

jobs:
  validate-inputs:
    name: Validate Inputs
    runs-on: ubuntu-latest
    outputs:
      file-exists: ${{ steps.check.outputs.exists }}
      estimated-time: ${{ steps.estimate.outputs.time }}
      file-size: ${{ steps.check.outputs.file_size }}
      estimated-chunks: ${{ steps.check.outputs.estimated_chunks }}
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    
    - name: Check if input file exists
      id: check
      run: |
        if [ -f "${{ github.event.inputs.input_file }}" ]; then
          echo "exists=true" >> $GITHUB_OUTPUT
          echo "âœ… Ð¤Ð°Ð¹Ð» Ð½Ð°Ð¹Ð´ÐµÐ½: ${{ github.event.inputs.input_file }}"
          
          # ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð°
          file_size=$(wc -c < "${{ github.event.inputs.input_file }}")
          echo "file_size=$file_size" >> $GITHUB_OUTPUT
          
          # Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€Ð°Ð·Ð¼ÐµÑ€Ñ‹
          file_size_kb=$((file_size / 1024))
          file_size_mb=$((file_size_kb / 1024))
          
          echo "ðŸ“ Ð Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð°: ${file_size_kb}KB (${file_size_mb}MB)"
          
          # ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð°Ñ Ð¾Ñ†ÐµÐ½ÐºÐ° Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² (1 Ñ‚Ð¾ÐºÐµÐ½ â‰ˆ 4 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°)
          estimated_tokens=$((file_size / 4))
          chunk_size=${{ github.event.inputs.chunk_size }}
          estimated_chunks=$((estimated_tokens / chunk_size + 1))
          
          echo "estimated_chunks=$estimated_chunks" >> $GITHUB_OUTPUT
          
          echo "ðŸ”¢ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð²: $estimated_tokens"
          echo "ðŸ“¦ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ‡Ð°Ð½ÐºÐ¾Ð²: $estimated_chunks"
          
        else
          echo "exists=false" >> $GITHUB_OUTPUT
          echo "âŒ Ð¤Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½: ${{ github.event.inputs.input_file }}"
          exit 1
        fi
    
    - name: Estimate processing time for paid tier
      id: estimate
      if: steps.check.outputs.exists == 'true'
      run: |
        estimated_chunks=${{ steps.check.outputs.estimated_chunks }}
        delay=${{ github.event.inputs.delay_between_chunks }}
        concurrent=${{ github.event.inputs.concurrent_requests }}
        
        # Ð’Ñ€ÐµÐ¼Ñ Ð´Ð»Ñ Ð¿Ð»Ð°Ñ‚Ð½Ð¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ (Ð±Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°)
        processing_time_per_chunk=10
        
        # Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ bc Ð´Ð»Ñ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¹ Ñ Ð¿Ð»Ð°Ð²Ð°ÑŽÑ‰ÐµÐ¹ Ñ‚Ð¾Ñ‡ÐºÐ¾Ð¹
        total_processing_time=$((estimated_chunks * processing_time_per_chunk / concurrent))
        total_delay_time=$((estimated_chunks * delay))
        total_time_seconds=$((total_processing_time + total_delay_time))
        estimated_minutes=$((total_time_seconds / 60))
        
        echo "time=${estimated_minutes}" >> $GITHUB_OUTPUT
        echo "â±ï¸ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸: ${estimated_minutes} Ð¼Ð¸Ð½ÑƒÑ‚"
        echo "ðŸš€ ÐŸÐ»Ð°Ñ‚Ð½Ñ‹Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ: Ð±Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ $concurrent Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°Ð¼Ð¸"
        
        if [ $estimated_minutes -gt 30 ]; then
          echo "â„¹ï¸ ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð·Ð°Ð¹Ð¼ÐµÑ‚ Ð±Ð¾Ð»ÐµÐµ 30 Ð¼Ð¸Ð½ÑƒÑ‚"
        fi

  process-file:
    name: Process File with Gemini (Paid Tier)
    runs-on: ubuntu-latest
    needs: validate-inputs
    if: needs.validate-inputs.outputs.file-exists == 'true'
    
    permissions:
      contents: write
      actions: read
    
    env:
      GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
      PYTHONUNBUFFERED: 1
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
    
    - name: Set up Python 3.11
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        cache: 'pip'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    
    - name: Validate API key
      run: |
        if [ -z "$GEMINI_API_KEY" ]; then
          echo "âŒ GEMINI_API_KEY Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð² Secrets"
          echo "ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Settings â†’ Secrets and variables â†’ Actions"
          echo "Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ secret Ñ Ð¸Ð¼ÐµÐ½ÐµÐ¼ GEMINI_API_KEY"
          exit 1
        else
          echo "âœ… API ÐºÐ»ÑŽÑ‡ Ð½Ð°Ð¹Ð´ÐµÐ½"
        fi
    
    - name: Create output directory
      run: |
        mkdir -p outputs
        echo "ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð° Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ outputs/"
    
    - name: Show processing parameters (Paid Tier)
      run: |
        file_size=${{ needs.validate-inputs.outputs.file-size }}
        file_size_kb=$((file_size / 1024))
        
        echo "ðŸš€ ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ (ÐŸÐ›ÐÐ¢ÐÐ«Ð™ Ð£Ð ÐžÐ’Ð•ÐÐ¬):"
        echo "   ðŸ“„ Ð¤Ð°Ð¹Ð»: ${{ github.event.inputs.input_file }}"
        echo "   ðŸ“ Ð Ð°Ð·Ð¼ÐµÑ€: ${file_size_kb}KB"
        echo "   ðŸ¤– ÐœÐ¾Ð´ÐµÐ»ÑŒ: ${{ github.event.inputs.model }}"
        echo "   ðŸ“¦ Ð Ð°Ð·Ð¼ÐµÑ€ Ñ‡Ð°Ð½ÐºÐ°: ${{ github.event.inputs.chunk_size }} Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð²"
        echo "   âš¡ Ð—Ð°Ð´ÐµÑ€Ð¶ÐºÐ°: ${{ github.event.inputs.delay_between_chunks }} ÑÐµÐºÑƒÐ½Ð´"
        echo "   ðŸ”„ ÐŸÐ°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²: ${{ github.event.inputs.concurrent_requests }}"
        echo "   ðŸ“¦ ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ñ… Ñ‡Ð°Ð½ÐºÐ¾Ð²: ${{ needs.validate-inputs.outputs.estimated-chunks }}"
        echo "   ðŸ’¾ Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ð¾Ð¹ Ñ„Ð°Ð¹Ð»: ${{ github.event.inputs.output_filename }}.txt"
        echo "   ðŸ“ ÐŸÑ€Ð¾Ð¼Ð¿Ñ‚: ${{ github.event.inputs.prompt }}"
        echo ""
        echo "ðŸ’³ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð»Ð¸Ð¼Ð¸Ñ‚Ñ‹ Ð¿Ð»Ð°Ñ‚Ð½Ð¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ Ð´Ð»Ñ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸"
    
    - name: Process file with Gemini API (Paid Tier)
      id: process
      run: |
        echo "ðŸš€ ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ð±Ñ‹ÑÑ‚Ñ€ÑƒÑŽ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ñ„Ð°Ð¹Ð»Ð° Ð½Ð° Ð¿Ð»Ð°Ñ‚Ð½Ð¾Ð¼ ÑƒÑ€Ð¾Ð²Ð½Ðµ..."
        
        # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¾ÑˆÐ¸Ð±Ð¾Ðº
        set +e
        
        python main.py \
          --file "${{ github.event.inputs.input_file }}" \
          --prompt "${{ github.event.inputs.prompt }}" \
          --output "outputs/${{ github.event.inputs.output_filename }}.txt" \
          --model "${{ github.event.inputs.model }}" \
          --chunk-size "${{ github.event.inputs.chunk_size }}" \
          --delay "${{ github.event.inputs.delay_between_chunks }}" \
          --concurrent "${{ github.event.inputs.concurrent_requests }}" \
          --paid-tier
        
        exit_code=$?
        
        if [ $exit_code -eq 0 ]; then
          echo "âœ… ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾"
          echo "success=true" >> $GITHUB_OUTPUT
        elif [ $exit_code -eq 2 ]; then
          echo "âš ï¸ ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð° Ñ‡Ð°ÑÑ‚Ð¸Ñ‡Ð½Ð¾"
          echo "success=partial" >> $GITHUB_OUTPUT
        else
          echo "âŒ ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð° Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ°Ð¼Ð¸ (ÐºÐ¾Ð´: $exit_code)"
          echo "success=false" >> $GITHUB_OUTPUT
        fi
    
    - name: Check output file
      id: check_output
      run: |
        output_file="outputs/${{ github.event.inputs.output_filename }}.txt"
        
        if [ -f "$output_file" ]; then
          file_size=$(wc -c < "$output_file")
          line_count=$(wc -l < "$output_file")
          word_count=$(wc -w < "$output_file")
          
          # Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ñ€Ð°Ð·Ð¼ÐµÑ€Ñ‹
          file_size_kb=$((file_size / 1024))
          file_size_mb=$((file_size_kb / 1024))
          
          echo "ðŸ“„ Ð¡Ð¾Ð·Ð´Ð°Ð½ Ñ„Ð°Ð¹Ð»: $output_file"
          echo "ðŸ“ Ð Ð°Ð·Ð¼ÐµÑ€: ${file_size_kb}KB (${file_size_mb}MB)"
          echo "ðŸ“ Ð¡Ñ‚Ñ€Ð¾Ðº: $line_count"
          echo "ðŸ“ Ð¡Ð»Ð¾Ð²: $word_count"
          
          echo "file_created=true" >> $GITHUB_OUTPUT
          echo "file_size=$file_size" >> $GITHUB_OUTPUT
          echo "line_count=$line_count" >> $GITHUB_OUTPUT
          
          # ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¿ÐµÑ€Ð²Ñ‹Ðµ Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
          echo ""
          echo "ðŸ” ÐŸÐµÑ€Ð²Ñ‹Ðµ 15 ÑÑ‚Ñ€Ð¾Ðº Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°:"
          echo "================================"
          head -15 "$output_file"
          echo ""
          echo "ðŸ” ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 10 ÑÑ‚Ñ€Ð¾Ðº Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°:"
          echo "=================================="
          tail -10 "$output_file"
          
        else
          echo "âŒ Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ð¾Ð¹ Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐ¾Ð·Ð´Ð°Ð½"
          echo "file_created=false" >> $GITHUB_OUTPUT
        fi
    
    - name: Upload result as artifact
      if: steps.check_output.outputs.file_created == 'true'
      uses: actions/upload-artifact@v4
      with:
        name: ${{ github.event.inputs.output_filename }}-${{ github.event.inputs.model }}-paid-result
        path: outputs/${{ github.event.inputs.output_filename }}.txt
        retention-days: 90
        compression-level: 0
    
    - name: Create processing summary
      if: always()
      run: |
        summary_file="outputs/processing_summary.md"
        
        input_size=${{ needs.validate-inputs.outputs.file-size }}
        input_size_kb=$((input_size / 1024))
        
        cat > "$summary_file" << EOF
        # ðŸš€ ÐžÑ‚Ñ‡ÐµÑ‚ Ð¾Ð± Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ñ„Ð°Ð¹Ð»Ð° (ÐŸÐ»Ð°Ñ‚Ð½Ñ‹Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ)
        
        ## ðŸ“Š ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
        - **Ð’Ñ…Ð¾Ð´Ð½Ð¾Ð¹ Ñ„Ð°Ð¹Ð»**: \`${{ github.event.inputs.input_file }}\`
        - **Ð Ð°Ð·Ð¼ÐµÑ€ Ð²Ñ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°**: ${input_size_kb}KB
        - **ÐœÐ¾Ð´ÐµÐ»ÑŒ**: \`${{ github.event.inputs.model }}\`
        - **Ð Ð°Ð·Ð¼ÐµÑ€ Ñ‡Ð°Ð½ÐºÐ°**: ${{ github.event.inputs.chunk_size }} Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð²
        - **Ð—Ð°Ð´ÐµÑ€Ð¶ÐºÐ° Ð¼ÐµÐ¶Ð´Ñƒ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°Ð¼Ð¸**: ${{ github.event.inputs.delay_between_chunks }} ÑÐµÐºÑƒÐ½Ð´
        - **ÐŸÐ°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²**: ${{ github.event.inputs.concurrent_requests }}
        - **ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ñ… Ñ‡Ð°Ð½ÐºÐ¾Ð²**: ${{ needs.validate-inputs.outputs.estimated-chunks }}
        - **Ð’Ñ€ÐµÐ¼Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸**: $(date)
        - **Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ**: ðŸ’³ ÐŸÐ»Ð°Ñ‚Ð½Ñ‹Ð¹ (Ð²Ñ‹ÑÐ¾ÐºÐ¸Ðµ Ð»Ð¸Ð¼Ð¸Ñ‚Ñ‹)
        
        ## ðŸ“ˆ Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚
        - **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ**: ${{ steps.process.outputs.success || 'failed' }}
        - **Ð¤Ð°Ð¹Ð» ÑÐ¾Ð·Ð´Ð°Ð½**: ${{ steps.check_output.outputs.file_created || 'false' }}
        EOF
        
        if [ "${{ steps.check_output.outputs.file_created }}" == "true" ]; then
          output_size=${{ steps.check_output.outputs.file_size }}
          output_size_kb=$((output_size / 1024))
          echo "- **Ð Ð°Ð·Ð¼ÐµÑ€ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°**: ${output_size_kb}KB" >> "$summary_file"
          echo "- **ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‚Ñ€Ð¾Ðº**: ${{ steps.check_output.outputs.line_count }}" >> "$summary
